---
title: '[Next.js] Sentry ì•Œë¦¼ ìë™í™”ë¡œ ì´ˆë™ ëŒ€ì‘ ë‹¨ì¶•í•˜ê¸°: Supabase(DB) ì§‘ê³„Â·ë¡œê·¸ + LLM íŠ¸ë¦¬ì•„ì§€'
author: 'eunwoo'
thumbnail: '/thumbnail/nextjs.webp'
publishDate: '2026-01-18'
categoryId: 5
keywords:
  [
    'Next.js ì•Œë¦¼ ìë™í™”',
    'Next.js Sentry',
    'React ì•Œë¦¼ ìë™í™”',
    'React Sentry',
    'Slack',
    'Supabase',
    'Prisma',
    'LLM',
  ]
description: 'Sentry ì•Œë¦¼ì„ ì‹ í˜¸ë¡œ ë§Œë“¤ì–´ í­ì£¼ ì œì–´, ì¡°ê±´ë¶€ LLM íŠ¸ë¦¬ì•„ì§€, Slack ìš´ì˜ íë¦„ ìë™í™”ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•'
---

ë³´í†µ ìš°ë¦¬ëŠ” Sentryë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì´ë¥¼ ê°œë°œìì—ê²Œ ì•Œë¦¬ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤.
í˜„ì¬ Next.jsë¡œ êµ¬ì¶•ëœ [VitalTrip](https://aiaivitaltrip.com) ì„œë¹„ìŠ¤ì—ì„œë„ ì„œë¹„ìŠ¤ì— Sentryë¥¼ ë¶™ì˜€ê³ , ì—ëŸ¬ê°€ ìƒê¸°ë©´ Slackì— ì•Œë¦¼ì´ ì˜¤ê²Œ í–ˆë‹¤.

í•˜ì§€ë§Œ, ì•Œë¦¼ì´ ì˜¨ë‹¤ê³  ë¬¸ì œê°€ í•´ê²°ë˜ëŠ” ê±´ ì•„ë‹ˆì—ˆë‹¤. ì˜¤íˆë ¤ ì•Œë¦¼ì´ ì˜ ì˜¤ê¸° ì‹œì‘í•˜ë©´ì„œ, ìƒˆë¡œìš´ ë¬¸ì œê°€ ìƒê²¼ë‹¤.

### 1. ì•Œë¦¼ì´ â€˜ì •ë³´â€™ê°€ ì•„ë‹ˆë¼ â€˜ì¡ìŒâ€™ì´ ë˜ëŠ” ìˆœê°„

ë°°í¬ ì§í›„ ê°™ì€ ì—ëŸ¬ê°€ ì—°ì†ìœ¼ë¡œ í„°ì§€ë©´ Slackì€ ê¸ˆë°© ì´ëŸ° ìƒíƒœê°€ ëœë‹¤.

- ê°™ì€ ì œëª©ì˜ ì•Œë¦¼ì´ 10ê°œ, 20ê°œ, 30ê°œâ€¦
- ì‚¬ëŒë“¤ì´ ì²˜ìŒì—” ëˆŒëŸ¬ë³¸ë‹¤ â†’ ê·¸ëŸ¬ë‚˜ ê¸ˆì„¸ í”¼ë¡œí•´ì§„ë‹¤
- â€œì–´ì°¨í”¼ ë˜ ê°™ì€ ê±°ê² ì§€â€ í•˜ê³  ì•Œë¦¼ì„ ë¬´ì‹œí•œë‹¤

ì•Œë¦¼ì´ ë§ì•„ì§€ë©´ íŒ€ì€ ë‘ ê°€ì§€ ë°˜ì‘ ì¤‘ í•˜ë‚˜ë¡œ ê°„ë‹¤.

1. ì•Œë¦¼ì„ êº¼ë²„ë¦°ë‹¤
2. ì•Œë¦¼ì„ ì¼œë‘ì§€ë§Œ ë” ì´ìƒ ì‹ ë¢°í•˜ì§€ ì•ŠëŠ”ë‹¤

ë‘˜ ë‹¤ ì¹˜ëª…ì ì´ë‹¤. íŠ¹íˆ ë‘ ë²ˆì§¸ê°€ ë” ë¬´ì„­ë‹¤.  
**ì¤‘ìš”í•œ ì•Œë¦¼ë„ í‰ë²”í•œ ì¡ìŒì²˜ëŸ¼ ì²˜ë¦¬ë˜ê¸° ì‹œì‘**í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

### 2. ì‹œê°„ ë‚­ë¹„ì˜ ì§„ì§œ ì›ì¸ì€ â€˜ì—ëŸ¬â€™ê°€ ì•„ë‹ˆë¼ â€˜ì´ˆë™ ëŒ€ì‘â€™ì´ì—ˆë‹¤

ë‚´ê°€ ì‹¤ì œë¡œ ì‹œê°„ì„ ë§ì´ ì“°ë˜ ìˆœê°„ì€ ì´ëŸ° ìˆœê°„ë“¤ì´ì—ˆë‹¤.

- Slack ì•Œë¦¼ ë§í¬ë¥¼ ì—´ê³  Sentry í™”ë©´ìœ¼ë¡œ ì´ë™
- stacktraceë¥¼ í›‘ê³  â€œì–´ë””ì„œ í„°ì¡ŒëŠ”ì§€â€ ì •ë¦¬
- ìµœê·¼ ë°°í¬/ë³€ê²½ì‚¬í•­ì„ ë– ì˜¬ë¦¬ë©° â€œì›ì¸ í›„ë³´â€ë¥¼ ë¨¸ë¦¿ì†ì—ì„œ ë½‘ê¸°
- íŒ€ì›ì—ê²Œ ê³µìœ í•  ìˆ˜ ìˆê²Œ ë¬¸ì¥ìœ¼ë¡œ ë‹¤ì‹œ ì •ë¦¬
- ë‹¤ìŒ ì•¡ì…˜(ì¬í˜„/ë¡œê·¸/ë¡¤ë°±/í•«í”½ìŠ¤)ì„ ì²´í¬ë¦¬ìŠ¤íŠ¸ì²˜ëŸ¼ ì ê¸°

ê·¸ë¦¬ê³  ë” ë¬¸ì œì˜€ë˜ ê±´, ì´ ê³¼ì •ì´ **ë§¤ë²ˆ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘**ëœë‹¤ëŠ” ì ì´ì—ˆë‹¤.

ê°™ì€ ì´ìŠˆê°€ ë‹¤ì‹œ í„°ì§€ë©´  
 â€œì´ê±° ì „ì— ë´¤ë˜ ê±´ë°â€¦ ê·¸ë•Œ ë­ê°€ ì›ì¸ì´ì—ˆì§€?â€  
 â€œëˆ„ê°€ í™•ì¸í•˜ê³  ìˆì—ˆì§€?â€  
 â€œACKëŠ” ëë‚˜?â€
ë“±ë“±ì„ ë‹¤ì‹œ ë– ì˜¬ë ¤ì•¼ í–ˆë‹¤.

Slackì—ëŠ” ëŒ€í™”ê°€ í©ì–´ì ¸ ìˆê³ , Sentryì—ëŠ” ì´ìŠˆëŠ” ìˆì§€ë§Œ â€œìš°ë¦¬ íŒ€ì˜ íë¦„â€ì´ ë‚¨ì•„ìˆì§€ ì•Šì•˜ë‹¤.

### 3. ê·¸ë˜ì„œ ë‚˜ëŠ” â€œì•Œë¦¼ ë´‡â€ì´ ì•„ë‹ˆë¼ â€œì•Œë¦¼ ì²´ê³„â€ë¥¼ ë§Œë“¤ê¸°ë¡œ í–ˆë‹¤

ì´ ê¸€ì—ì„œ ì´ì•¼ê¸°í•˜ëŠ” ê±´ â€œSentry ì•Œë¦¼ì„ Slackìœ¼ë¡œ ë³´ë‚´ê¸°â€ê°€ ì•„ë‹ˆë‹¤.  
ë‚´ê°€ ë§Œë“¤ê³ ì í–ˆë˜ ê±´ **Sentry ì•Œë¦¼ì„ â€˜ì‹ í˜¸â€™ë¡œ ë§Œë“œëŠ” ì²´ê³„**ë‹¤.

ì´ ì²´ê³„ëŠ” ì„¸ ê°€ì§€ ëª©í‘œë¥¼ ê°€ì§„ë‹¤.

- **ë™ì¼ ì´ìŠˆ ë„ë°°ë¥¼ ë§‰ê³ **
- **í•„ìš”í•œ ìˆœê°„ì—ë§Œ ë¶„ì„ì„ ìë™í™”í•˜ë©°**
- **ëŒ€ì‘ ê³¼ì •ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê²¨ì„œ ë‹¤ìŒ ëŒ€ì‘ì´ ë” ë¹¨ë¼ì§€ê²Œ ë§Œë“œëŠ” íë¦„**

ì¦‰, ëª©í‘œëŠ” í•œ ì¤„ë¡œ ì •ë¦¬í•˜ë©´ â€œì•Œë¦¼ì„ ëŠ˜ë¦¬ì§€ ë§ê³ , ì‚¬ê³  ì‹œê°„ì„ ì¤„ì´ì.â€ ì´ë‹¤.

## ëª©í‘œ(ì„¤ê³„ ê¸°ì¤€)

ì´ ì‹œìŠ¤í…œì€ 3ê°œì˜ ê¸°ì¤€ìœ¼ë¡œ ì„¤ê³„í–ˆë‹¤.

1. **ë…¸ì´ì¦ˆ ì œì–´**: ë™ì¼ ì´ìŠˆëŠ” 10ë¶„ì— 1ë²ˆë§Œ ì•Œë¦¼
2. **ì´ˆë™ ëŒ€ì‘ ë‹¨ì¶•**: ìƒˆ ì´ìŠˆ/ê¸‰ì¦/ì‹¬ê°í•  ë•Œë§Œ LLM íŠ¸ë¦¬ì•„ì§€ + TTL ìºì‹œ
3. **ìš´ì˜ ê°€ëŠ¥í•œ ê¸°ë¡**: DBì— ì•Œë¦¼/íŠ¸ë¦¬ì•„ì§€/ìƒíƒœë¥¼ ë‚¨ê¸°ê³  ëŒ€ì‹œë³´ë“œë¡œ ì¡°íšŒ

í¬ì¸íŠ¸ëŠ” â€œAIë¥¼ ì¼ë‹¤â€ê°€ ì•„ë‹ˆë¼,  
 â€œë°˜ë³µë˜ë˜ ì´ˆë™ ëŒ€ì‘ì„ ì‹œìŠ¤í…œìœ¼ë¡œ ë°”ê¿¨ë‹¤â€ ì´ë‹¤.

# ì‹œìŠ¤í…œ ì „ì²´ íë¦„

í•œ ì¤„ë¡œ ìš”ì•½í•˜ë©´, **Sentry ì´ë²¤íŠ¸ë¥¼ â€˜ì•Œë¦¼â€™ìœ¼ë¡œ ë³´ë‚´ê¸° ì „ì— í•œ ë²ˆ ì •ì œí•´ì„œ Slackì— ì „ë‹¬í•˜ê³ , ê·¸ ê¸°ë¡ì„ ìš´ì˜íˆ´ë¡œ ë‚¨ê¸°ëŠ” íë¦„**ì´ë‹¤.

1. **Sentry â†’ Webhook ì „ì†¡**  
   ì´ìŠˆê°€ ìƒê¸°ë©´ Sentryê°€ ìš°ë¦¬ ì„œë²„(`/api/sentry/webhook`)ë¡œ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚¸ë‹¤.

2. **Webhook ìˆ˜ì‹  â†’ í•„ë“œ ì •ê·œí™”**  
   payloadì—ì„œ ì´ìŠˆ ID/ì œëª©/ë ˆë²¨/í™˜ê²½/ë§í¬ ê°™ì€ í•µì‹¬ ì •ë³´ë§Œ ì¶”ì¶œí•´ â€œí‘œì¤€ í˜•íƒœâ€ë¡œ ë§Œë“ ë‹¤.

3. **DB ì €ì¥ + ë°œìƒ íšŸìˆ˜ ì§‘ê³„**  
   ì´ìŠˆë¥¼ upsertí•˜ê³ , ëˆ„ì  íšŸìˆ˜ì™€ â€œìµœê·¼ 10ë¶„ ë°œìƒ íšŸìˆ˜â€ë¥¼ í•¨ê»˜ ê°±ì‹ í•œë‹¤.

4. **10ë¶„ ìœˆë„ìš°ë¡œ ì¤‘ë³µ ì•Œë¦¼ ì°¨ë‹¨**  
   ê°™ì€ ì´ìŠˆëŠ” 10ë¶„ì— 1ë²ˆë§Œ Slackìœ¼ë¡œ ë³´ë‚¸ë‹¤.  
   ëŒ€ì‹  ë©”ì‹œì§€ì—ëŠ” â€œìµœê·¼ 10ë¶„ NíšŒ / ëˆ„ì  MíšŒâ€ë¥¼ ë„£ì–´ ìƒí™© íŒë‹¨ì´ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.

5. **(ì¡°ê±´ë¶€) LLM íŠ¸ë¦¬ì•„ì§€ + TTL ìºì‹œ**  
   ìƒˆ ì´ìŠˆ/ê¸‰ì¦/errorÂ·fatal ê°™ì€ ì¡°ê±´ì—ì„œë§Œ LLMì„ í˜¸ì¶œí•´ ìš”ì•½Â·ì›ì¸ í›„ë³´Â·ë‹¤ìŒ ì•¡ì…˜ì„ ìƒì„±í•œë‹¤.  
   ê²°ê³¼ëŠ” 24ì‹œê°„ ìºì‹œí•´ ê°™ì€ ì´ìŠˆì— ì¬í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤.

6. **Slack ì•Œë¦¼ ì „ì†¡ + ìš´ì˜ ê¸°ë¡ ì €ì¥**  
   Slackì—ëŠ” êµ¬ì¡°í™”ëœ ë©”ì‹œì§€(ì¹´ìš´íŠ¸ + ë§í¬ + íŠ¸ë¦¬ì•„ì§€)ë¥¼ ë³´ë‚´ê³ ,  
   ì „ì†¡ ì„±ê³µ/ì‹¤íŒ¨ì™€ íŠ¸ë¦¬ì•„ì§€ ê²°ê³¼ëŠ” DBì— ë‚¨ê²¨ ëŒ€ì‹œë³´ë“œì—ì„œ ì¬í™•ì¸í•  ìˆ˜ ìˆê²Œ í•œë‹¤.

## í•µì‹¬ ì•„ì´ë””ì–´ 1. 10ë¶„ ìœˆë„ìš°ë¡œ â€œë…¸ì´ì¦ˆâ€ë¥¼ â€œì§€í‘œâ€ë¡œ ë°”ê¾¸ê¸°

ì•Œë¦¼ì´ í­ì£¼í•  ë•Œ, ë‚˜ëŠ” ì•Œë¦¼ì„ â€œì¤„ì´ëŠ”â€ ê²Œ ì•„ë‹ˆë¼ í˜•íƒœë¥¼ ë°”ê¾¸ê³  ì‹¶ì—ˆë‹¤.

- ê°™ì€ ì´ìŠˆê°€ 30ë²ˆ ëœ¨ëŠ” ëŒ€ì‹  â†’ Slackì—ëŠ” 1ë²ˆë§Œ
- ëŒ€ì‹  â€œìµœê·¼ 10ë¶„ ë°œìƒ NíšŒ / ëˆ„ì  MíšŒâ€ë¥¼ ë³´ì—¬ì£¼ê¸°

ì´ëŸ¬ë©´ íŒ€ì€ ë§í¬ë¥¼ ë¬´ì‹œí•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, ìƒí™©ì„ íŒë‹¨í•  ìˆ˜ ìˆëŠ” ì •ë³´ë¥¼ ì–»ì„ ìˆ˜. ìˆë‹¤.

## í•µì‹¬ ì•„ì´ë””ì–´ 2. LLMì€ â€˜í•­ìƒâ€™ì´ ì•„ë‹ˆë¼ â€˜ì¡°ê±´ë¶€â€™ë¡œ

LLMì„ ëª¨ë“  ì´ìŠˆì— ë¶™ì´ë©´ ë¹„ìš©ì´ ë§ì´ ë“ ë‹¤. ì¤‘ìš”í•˜ì§€ ì•Šì€ ì´ìŠˆê¹Œì§€ ë¶„ì„í•´ì„œ ë…¸ì´ì¦ˆê°€ ë  ìˆ˜ë„ ìˆë‹¤.

ê·¸ë˜ì„œ ë‚˜ëŠ” LLMì„ ì´ˆë™ ì‹œê°„ ë‹¨ì¶• ë„êµ¬ë¡œë§Œ ì‚¬ìš©í–ˆë‹¤.

LLM í˜¸ì¶œ ì¡°ê±´ì€ ì•„ë˜ë¡œ ì •í–ˆë‹¤.

- ìƒˆ ì´ìŠˆ (first time)
- error/fatal
- ìµœê·¼ 10ë¶„ ê¸‰ì¦(ì˜ˆ: 5íšŒ ì´ìƒ)

ì´ ì¡°ê±´ì— ë§ì„ ë•Œë§Œ LLMì„ í˜¸ì¶œí•´ ìš”ì•½Â·ì›ì¸ í›„ë³´Â·ë‹¤ìŒ ì•¡ì…˜ì„ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  ê²°ê³¼ëŠ” TTL ìºì‹œ(ì˜ˆ: 24ì‹œê°„) í•´ì„œ ê°™ì€ ì´ìŠˆê°€ ë°˜ë³µë˜ë©´ ì¬í˜¸ì¶œì„ ë§‰ì•˜ë‹¤.

# Slack Incoming Webhook & Supabase ì¤€ë¹„í•˜ê¸°

Slack Incoming Webhookê³¼ Supabase ì„¸íŒ…ì€ ë©”ì¸ ë‚´ìš©ì´ ì•„ë‹ˆê¸°ì— ìƒì„¸íˆëŠ” ë‹¤ë£¨ì§€ ì•Šê³  í•µì‹¬ë§Œ ëª…ë£Œí•˜ê²Œ ì •ë¦¬í•˜ê² ë‹¤.

## Slack Incoming Webhook ë§Œë“¤ê¸°

[Slack ê³µì‹ ë¬¸ì„œ](https://docs.slack.dev/messaging/sending-messages-using-incoming-webhooks) ê¸°ì¤€ íë¦„ì€ â€œSlack App ë§Œë“¤ê³  Incoming Webhooks í™œì„±í™” â†’ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì„¤ì¹˜ â†’ Webhook URL ìƒì„±â€ì´ë‹¤.

1. Slack APIì—ì„œ **Create an app**
2. **Incoming Webhooks** ê¸°ëŠ¥ í™œì„±í™”(ON)
3. **Add New Webhook to Workspace**
4. ì±„ë„ ì„ íƒ â†’ Webhook URL ë³µì‚¬

ì—¬ê¸°ì„œ ìƒì„±ëœ Webhook URLì„ í™˜ê²½ ë³€ìˆ˜ë¡œ ì €ì¥í•´ ë‘”ë‹¤. (ì˜ˆ: `SLACK_WEBHOOK_URL`)

## Sentry ì„¤ì •: Internal Integration + Issue Alert Rule

## Supabase í”„ë¡œì íŠ¸ ìƒì„±

[Supabase](https://supabase.com)ì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤. (ë¬´ë£Œ í”Œëœ ê°€ëŠ¥)

1. Supabase ê³„ì • ìƒì„±/ë¡œê·¸ì¸
2. New Project â†’ í”„ë¡œì íŠ¸ ì´ë¦„/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ â†’ Create new project
3. Project Overviewì—ì„œ ìƒë‹¨ì— Connect í´ë¦­ í›„ DB ì—°ê²° ë¬¸ìì—´ 2ê°œ í™•ë³´ (Methodì—ì„œ ì„ íƒ)
   - DATABASE_URL: â€œPooler(ì„¸ì…˜/íŠ¸ëœì­ì…˜ í’€ë§)â€ (Vercel ëŸ°íƒ€ì„ìš©)
   - DIRECT_URL: â€œì§ì ‘ ì—°ê²°â€ (ë§ˆì´ê·¸ë ˆì´ì…˜/CLIìš©)

ì—¬ê¸°ì„œë„ ì–»ì€ ì—°ê²° ë¬¸ìì—´ì„ í™˜ê²½ ë³€ìˆ˜ë¡œ ì €ì¥í•´ ë‘”ë‹¤. (ì˜ˆ: `SUPABASE_DB_URL`, `SUPABASE_DB_DIRECT_URL`)

ì¶”ê°€ì ìœ¼ë¡œ ì´í›„ì— `LLM`ìœ¼ë¡œ `OpenAI`ë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì´ë¯€ë¡œ, OpenAI API í‚¤ë„ í™˜ê²½ ë³€ìˆ˜ë¡œ ì €ì¥í•´ ë‘”ë‹¤. (ì˜ˆ: `OPENAI_API_KEY`)

# Prisma ìŠ¤í‚¤ë§ˆ(í…Œì´ë¸”) ìƒì„±í•˜ê¸°

Prismaë¥¼ ì‚¬ìš©í•´ `Supabase(PostgreSQL)`ì™€ ì—°ê²°í•˜ê³ , ì•Œë¦¼/íŠ¸ë¦¬ì•„ì§€/ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ í…Œì´ë¸”ì„ ë§Œë“ ë‹¤.
ìš°ì„  Prismaì™€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì„¤ì¹˜í•˜ê³  ì´ˆê¸°í™”í•œë‹¤.

```bash
npm i prisma @prisma/client
npx prisma init

or

pnpm add prisma @prisma/client
pnpm dlx prisma init
```

ê·¸ë¦¬ê³  `prisma/schema.prisma`ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ìì—´ì„ ì„¤ì •í•œë‹¤.

```prisma
datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

enum IssueStatus {
  OPEN
  ACK
  FIXED
  IGNORED
}

model SentryIssue {
  id              String      @id
  project         String?
  environment     String?
  level           String?
  title           String?
  culprit         String?
  url             String?

  firstSeenAt     DateTime    @default(now())
  lastSeenAt      DateTime    @default(now())
  totalCount      Int         @default(0)

  windowStartAt   DateTime    @default(now())
  windowCount     Int         @default(0)

  status          IssueStatus @default(OPEN)
  lastNotifiedAt  DateTime?

  triageJson      Json?
  triageUpdatedAt DateTime?

  notifications   NotificationLog[]
  triageRuns      TriageRun[]

  @@index([lastSeenAt])
}

model NotificationLog {
  id        String   @id @default(cuid())
  issueId   String
  channel   String   // "slack"
  sentAt    DateTime @default(now())
  success   Boolean  @default(true)
  errorMsg  String?

  issue     SentryIssue @relation(fields: [issueId], references: [id], onDelete: Cascade)

  @@index([issueId, sentAt])
}

model TriageRun {
  id        String   @id @default(cuid())
  issueId   String
  provider  String   // "openai"
  model     String?
  createdAt DateTime @default(now())
  result    Json

  issue     SentryIssue @relation(fields: [issueId], references: [id], onDelete: Cascade)

  @@index([issueId, createdAt])
}
```

ì—¬ê¸°ì„œ `SentryIssue`ëŠ” Sentry ì´ìŠˆë¥¼ ë‚˜íƒ€ë‚´ê³ , `NotificationLog`ëŠ” ì•Œë¦¼ ì „ì†¡ ê¸°ë¡, `TriageRun`ì€ AI LLM íŠ¸ë¦¬ì•„ì§€ ì‹¤í–‰ ê¸°ë¡ì„ ë‹´ëŠ”ë‹¤.

![](https://velog.velcdn.com/images/eunwoo1341/post/e2c3a31b-ed93-49d3-b116-097ca004d929/image.png)

ì´í›„ì— ë‹¤ë£° ëª¨ë“  ë¡œì§ì´ êµ¬í˜„ë˜ê³  Sentry ì—ëŸ¬ë“¤ì´ ë‹´ê¸°ë©´ `Supabase`ì— ì ‘ì†í•´ `Table Editor`ì—ì„œ í…Œì´ë¸”ì— ë‹´ê¸´ ë°ì´í„°ë¥¼ ìœ„ ì´ë¯¸ì§€ì™€ ê°™ì´ ì§ì ‘ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•´ í…Œì´ë¸”ì„ ìƒì„±í•œë‹¤.

```bash
npx prisma migrate dev -n init

or

pnpm dlx prisma migrate dev -n init
```

í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ `/prisma/migrations` í´ë”ì— ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼(SQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±)ì´ ìƒì„±ëœë‹¤.
ê·¸ í›„, ìë™ìœ¼ë¡œ DATABASE_URLì— ì—°ê²°í•˜ì—¬ SQL ì‹¤í–‰ë˜ê³  Supabase ë°ì´í„°ë² ì´ìŠ¤ì— í…Œì´ë¸”ì´ ë§Œë“¤ì–´ì§„ë‹¤.

`_prisma_migrations` í…Œì´ë¸”ì— ë§ˆì´ê·¸ë ˆì´ì…˜ ê¸°ë¡ ì €ì¥ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

# Prisma Client ì„¤ì •í•˜ê¸°

`Prisma Client`ë¥¼ ì‚¬ìš©í•´ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ê²°ì„ ê´€ë¦¬í•˜ëŠ” Prisma í´ë¼ì´ì–¸íŠ¸ë¥¼ ì„¤ì •í•œë‹¤.

```ts
// lib/prisma.ts
import { PrismaPg } from '@prisma/adapter-pg';
import { PrismaClient } from '@prisma/client';
import { Pool } from 'pg';

const globalForPrisma = globalThis as unknown as { prisma?: PrismaClient };

const pool = new Pool({ connectionString: process.env.DATABASE_URL });
const adapter = new PrismaPg(pool);

export const prisma =
  globalForPrisma.prisma ??
  new PrismaClient({
    adapter,
    log: ['error', 'warn'],
  });

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;
```

- `PrismaPg`: Prismaì˜ PostgreSQL ì–´ëŒ‘í„°, `PrismaClient`: Prisma ORM í´ë¼ì´ì–¸íŠ¸, `Pool`: node-postgresì˜ ì—°ê²° í’€

`Pool`: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì—°ê²° í’€ ìƒì„±
`adapter`: Prismaê°€ PostgreSQLê³¼ ì§ì ‘ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì–´ëŒ‘í„°

ì´ ì„¤ì •ì„ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì–´ë””ì„œë“  `prisma` ê°ì²´ë¥¼ ì„í¬íŠ¸í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

# Discord Webhook ì „ì†¡

í•´ë‹¹ ì½”ë“œëŠ” Slack Incoming Webhookìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€, Sentry ì´ìŠˆ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ Slack ë©”ì‹œì§€ ë¸”ë¡ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ í¬í•¨í•œë‹¤.
ì¦‰, Sentry ì—ëŸ¬ë¥¼ Slackìœ¼ë¡œ ì „ì†¡í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

```ts
// lib/slack.ts
type SlackTextObject = { type: 'mrkdwn'; text: string } | { type: 'plain_text'; text: string };

type SlackBlock =
  | { type: 'header'; text: { type: 'plain_text'; text: string } }
  | { type: 'section'; text: SlackTextObject }
  | { type: 'context'; elements: SlackTextObject[] }
  | { type: 'divider' };

export async function sendSlackWebhook(
  webhookUrl: string,
  payload: { text: string; blocks?: SlackBlock[] },
) {
  const res = await fetch(webhookUrl, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload),
  });

  if (!res.ok) {
    const text = await res.text().catch(() => '');
    throw new Error(`Slack webhook failed: ${res.status} ${text}`);
  }
}

export function buildSlackBlocks(input: {
  title: string;
  project?: string | null;
  environment?: string | null;
  level?: string | null;
  url?: string | null;
  windowMin: number;
  windowCount: number;
  totalCount: number;
  triage?: {
    severity?: string;
    summary?: string;
    likely_causes?: string[];
    next_actions?: string[];
  } | null;
}) {
  const severity = input.triage?.severity ?? 'P?';
  const header = `ğŸš¨ ${severity} | ${input.project ?? '-'} | ${input.environment ?? '-'} | level=${input.level ?? '-'}`;

  const blocks: SlackBlock[] = [
    { type: 'header', text: { type: 'plain_text', text: header } },
    { type: 'section', text: { type: 'mrkdwn', text: `*${input.title}*` } },
    {
      type: 'context',
      elements: [
        {
          type: 'mrkdwn',
          text: `ìµœê·¼ ${input.windowMin}ë¶„: *${input.windowCount}* / ëˆ„ì : *${input.totalCount}*`,
        },
      ],
    },
  ];

  if (input.url) {
    blocks.push({
      type: 'section',
      text: { type: 'mrkdwn', text: `ğŸ”— <${input.url}|Open in Sentry>` },
    });
  }

  if (input.triage?.summary) {
    blocks.push({ type: 'divider' });
    blocks.push({
      type: 'section',
      text: { type: 'mrkdwn', text: `*ğŸ§  ìš”ì•½*\n${input.triage.summary}` },
    });
  }

  const causes = input.triage?.likely_causes ?? [];
  if (causes.length) {
    blocks.push({
      type: 'section',
      text: { type: 'mrkdwn', text: `*ğŸ” ì›ì¸ í›„ë³´*\nâ€¢ ${causes.join('\nâ€¢ ')}` },
    });
  }

  const actions = input.triage?.next_actions ?? [];
  if (actions.length) {
    blocks.push({
      type: 'section',
      text: { type: 'mrkdwn', text: `*âœ… ë‹¤ìŒ ì•¡ì…˜*\nâ€¢ ${actions.join('\nâ€¢ ')}` },
    });
  }

  return blocks;
}
```

`sendSlackWebhook` í•¨ìˆ˜ëŠ” ì£¼ì–´ì§„ Webhook URLë¡œ POST ìš”ì²­ì„ í•˜ì—¬ Slack ë©”ì‹œì§€ë¥¼ ì „ì†¡í•œë‹¤.

`buildSlackBlocks` í•¨ìˆ˜ëŠ” Sentry ì´ìŠˆ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ Slack ë©”ì‹œì§€ ë¸”ë¡ì„ ìƒì„±í•œë‹¤.  
ì´ ë¸”ë¡ë“¤ì€ ë©”ì‹œì§€ì˜ ì œëª©, í”„ë¡œì íŠ¸, í™˜ê²½, ë ˆë²¨, URL, ë°œìƒ íšŸìˆ˜, íŠ¸ë¦¬ì•„ì§€ ì •ë³´ë¥¼ í¬í•¨í•œë‹¤.
severityë¥¼ í†µí•´ ì•Œë¦¼ì˜ ì¤‘ìš”ë„ë¥¼ ì‹œê°ì ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.

# OpenAIë¥¼ ì´ìš©í•œ ì—ëŸ¬ íŠ¸ë¦¬ì•„ì§€

ì•„ë˜ íŒŒì¼ì€ OpenAI GPT-4o-minië¥¼ ì‚¬ìš©í•˜ì—¬ Sentry ì—ëŸ¬ë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ê³  ìš°ì„ ìˆœìœ„ë¥¼ ë§¤ê¸°ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

```ts
export type TriageJson = {
  summary: string;
  likely_causes: string[];
  next_actions: string[];
  severity: 'P0' | 'P1' | 'P2' | 'P3';
  tags: string[];
};

function extractJson(text: string) {
  const s = text.trim();
  const start = s.indexOf('{');
  const end = s.lastIndexOf('}');
  if (start < 0 || end < 0) throw new Error(`LLM did not return JSON: ${s}`);
  return JSON.parse(s.slice(start, end + 1));
}

export async function triageWithOpenAI(input: {
  issue: {
    id: string;
    title?: string | null;
    level?: string | null;
    project?: string | null;
    environment?: string | null;
    url?: string | null;
    windowCount: number;
    totalCount: number;
  };
  payload: unknown;
}): Promise<TriageJson> {
  const apiKey = process.env.OPENAI_API_KEY;
  if (!apiKey) throw new Error('Missing OPENAI_API_KEY');

  const prompt = `
    ë„ˆëŠ” ì‹œë‹ˆì–´ í”„ë¡ íŠ¸ì—”ë“œ ì—”ì§€ë‹ˆì–´ë‹¤.
    Sentry ì´ìŠˆë¥¼ ë³´ê³  íŒ€ì´ ë°”ë¡œ ì›€ì§ì¼ ìˆ˜ ìˆë„ë¡ íŠ¸ë¦¬ì•„ì§€ JSONë§Œ ì¶œë ¥í•´ë¼.
    
    ê·œì¹™:
    - Root Levelì— ì•„ë˜ í‚¤ë“¤ì´ ë°”ë¡œ ë‚˜ì™€ì•¼ í•¨ (wrapping ê¸ˆì§€)
    - summary: í•œê¸€ ìš”ì•½ (í•œ ë¬¸ì¥)
    - likely_causes: ì›ì¸ ì¶”ì • (ë°°ì—´, ìµœëŒ€ 3ê°œ)
    - next_actions: ì¡°ì¹˜ ì‚¬í•­ (ë°°ì—´, 3~7ê°œ)
    - severity: P0(ì¹˜ëª…ì )~P3(ì‚¬ì†Œí•¨)
    - tags: í‚¤ì›Œë“œ ë°°ì—´
    
    ì…ë ¥:
    project=${input.issue.project ?? ''}
    env=${input.issue.environment ?? ''}
    level=${input.issue.level ?? ''}
    title=${input.issue.title ?? ''}
    url=${input.issue.url ?? ''}
    recent_10m_count=${input.issue.windowCount}
    total_count=${input.issue.totalCount}
    
    payload(ì¼ë¶€):
    ${JSON.stringify(input.payload).slice(0, 8000)}
    `.trim();

  const res = await fetch('https://api.openai.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      Authorization: `Bearer ${apiKey}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'gpt-4o-mini',
      messages: [{ role: 'user', content: prompt }],
      response_format: { type: 'json_object' },
    }),
  });

  if (!res.ok) {
    const text = await res.text().catch(() => '');
    throw new Error(`OpenAI failed: ${res.status} ${text}`);
  }

  const data: unknown = await res.json();
  const d = data as { choices?: { message?: { content?: string } }[] };
  const text = d?.choices?.[0]?.message?.content ?? '';

  return extractJson(String(text));
}
```

`extractJson` í•¨ìˆ˜ëŠ” LLM ì‘ë‹µì—ì„œ JSON ë¶€ë¶„ë§Œ ì¶”ì¶œí•˜ê³ , LLMì´ ì¶”ê°€ í…ìŠ¤íŠ¸ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì¤‘ê´„í˜¸ ì‚¬ì´ì˜ ë‚´ìš©ë§Œ íŒŒì‹±í•œë‹¤.

`triageWithOpenAI` í•¨ìˆ˜ëŠ” OpenAI GPT-4o-mini ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ Sentry ì´ìŠˆë¥¼ ë¶„ì„í•˜ê³  íŠ¸ë¦¬ì•„ì§€ ì •ë³´ë¥¼ ìƒì„±í•œë‹¤.
ì¸ìë¡œ Sentry ì´ìŠˆ ì •ë³´ì™€ í˜ì´ë¡œë“œë¥¼ ë°›ì•„, OpenAI APIì— ìš”ì²­ì„ ë³´ë‚´ê³ , ì‘ë‹µì—ì„œ íŠ¸ë¦¬ì•„ì§€ JSONì„ ì¶”ì¶œí•˜ì—¬ ë°˜í™˜í•œë‹¤.

ì—¬ê¸°ì„œ `prompt`ê°€ ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì´ë¼ê³  ìƒê°í•œë‹¤.
ìµœëŒ€í•œ êµ¬ì²´ì ìœ¼ë¡œ ìš”êµ¬ì‚¬í•­ì„ ëª…ì‹œí•˜ê³ , ì¶œë ¥ í˜•ì‹ì„ ì—„ê²©íˆ ì§€ì •í•˜ì—¬ LLMì´ ì˜¬ë°”ë¥¸ JSONë§Œ ë°˜í™˜í•˜ë„ë¡ ìœ ë„í•˜ì˜€ë‹¤.
ë¹„ìš© íš¨ìœ¨ì ì¸ ëª¨ë¸ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `gpt-4o-mini` ëª¨ë¸ì„ ì„ íƒí–ˆë‹¤.

# Sentry Webhook Router Handler êµ¬í˜„

ë§ˆì§€ë§‰ìœ¼ë¡œ, Sentryì—ì„œ ì˜¤ëŠ” Webhookì„ ì²˜ë¦¬í•˜ëŠ” API Router Handlerë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤.
ì½”ë“œê°€ ê¸¸ì–´ì„œ í•µì‹¬ ë¡œì§ì„ í•¨ìˆ˜ë¡œ ì¶”ìƒí™”í•˜ì—¬ ì„¤ëª…í•´ë³´ê² ë‹¤.

```ts
export async function POST(req: Request) {
  // 1) Sentry ì„œëª… ê²€ì¦
  const ok = verifySentrySignature(rawBody, sig, secret);
  if (!ok) return NextResponse.json({ message: 'Invalid signature' }, { status: 401 });

  // 2) ì´ìŠˆ ì •ë³´ ì¶”ì¶œ
  const { issueId, title, level, project, environment, url } = extractSentryFields(body);

  // 3) DB ì—…ë°ì´íŠ¸ + 10ë¶„ ìœˆë„ìš° ì§‘ê³„
  const issue = await updateIssueWithWindow(issueId, now);

  // 4) ë„ë°° ë°©ì§€: 10ë¶„ì— 1ë²ˆë§Œ ì•Œë¦¼
  if (!shouldNotify) return NextResponse.json({ ok: true, skipped: 'rate_limited' });

  // 5) ì¡°ê±´ë¶€ LLM í˜¸ì¶œ + 24ì‹œê°„ TTL ìºì‹œ
  const triage = await getOrCreateTriage(issue, body);

  // 6) Slack ì•Œë¦¼ ì „ì†¡
  await sendSlackNotification(issue, triage);

  return NextResponse.json({ ok: true });
}
```

ì—¬ê¸°ì„œ í•µì‹¬ ë¶€ë¶„ì€ "10ë¶„ ìœˆë„ìš° ì§‘ê³„", "ì¡°ê±´ë¶€ LLM í˜¸ì¶œ + TTL ìºì‹œ", "Slack ì•Œë¦¼ ì „ì†¡" ì´ë‹¤.

### 10ë¶„ ìœˆë„ìš° ì§‘ê³„

```ts
const WINDOW_MS = 10 * 60 * 1000; // 10ë¶„

const windowExpired = now.getTime() - existing.windowStartAt.getTime() > WINDOW_MS;

await tx.sentryIssue.update({
  data: {
    totalCount: { increment: 1 }, // ëˆ„ì  íšŸìˆ˜
    windowStartAt: windowExpired ? now : existing.windowStartAt,
    windowCount: windowExpired ? 1 : { increment: 1 }, // 10ë¶„ ìœˆë„ìš° ì¹´ìš´íŠ¸
  },
});
```

ì´ ì½”ë“œëŠ” Sentry ì´ìŠˆì˜ ë°œìƒ íšŸìˆ˜ë¥¼ ëˆ„ì  ì¹´ìš´íŠ¸(`totalCount`)ì™€ 10ë¶„ ìœˆë„ìš° ì¹´ìš´íŠ¸(`windowCount`)ë¡œ ê´€ë¦¬í•œë‹¤.  
10ë¶„ì´ ì§€ë‚¬ìœ¼ë©´ ìœˆë„ìš°ë¥¼ ì´ˆê¸°í™”í•˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì¹´ìš´íŠ¸ë¥¼ ì¦ê°€ì‹œí‚¨ë‹¤.

### ì¡°ê±´ë¶€ LLM í˜¸ì¶œ + 24ì‹œê°„ TTL ìºì‹œ

```ts
const TRIAGE_TTL_MS = 24 * 60 * 60 * 1000; // 24ì‹œê°„

// TTL ë§Œë£Œ ì²´í¬
const triageExpired =
  !issue.triageUpdatedAt ||
  now.getTime() - issue.triageUpdatedAt.getTime() > TRIAGE_TTL_MS;

// í˜¸ì¶œ ì¡°ê±´: ìƒˆ ì´ìŠˆ OR ê¸‰ì¦ OR error/fatal
const isNew = issue.totalCount === 1;
const isSpike = issue.windowCount >= 5;
const isError = ['error', 'fatal'].includes(issue.level);

// ì¡°ê±´ ì¶©ì¡± ì‹œì—ë§Œ LLM í˜¸ì¶œ
if (!triage || triageExpired) && (isNew || isSpike || isError) {
  triage = await triageWithOpenAI({ issue, payload: body });

  // DBì— 24ì‹œê°„ ìºì‹œ
  await prisma.sentryIssue.update({
    data: {
      triageJson: triage,
      triageUpdatedAt: now  // TTL ì‹œì‘ ì‹œì 
    },
  });
}
```

ì´ ì½”ë“œëŠ” LLM íŠ¸ë¦¬ì•„ì§€ë¥¼ 24ì‹œê°„ ë™ì•ˆ ìºì‹œí•˜ì—¬ ë™ì¼ ì´ìŠˆì— ëŒ€í•´ ë°˜ë³µ í˜¸ì¶œì„ ë°©ì§€í•œë‹¤.
ë°˜ë³µ í˜¸ì¶œì„ ë°©ì§€í•¨ìœ¼ë¡œì¨, LLM ì‚¬ìš© ë¹„ìš©ì„ ì ˆê°í•˜ê³ , ë¶ˆí•„ìš”í•œ ë¶„ì„ì„ ì¤„ì¸ë‹¤.
LLM í˜¸ì¶œ ì¡°ê±´ì€ ìƒˆ ì´ìŠˆ, ê¸‰ì¦, error/fatal ë ˆë²¨ë¡œ ì œí•œí•˜ì˜€ë‹¤.

![](https://velog.velcdn.com/images/eunwoo1341/post/9230d252-ee99-43f7-86bb-5dd110dd13a3/image.png)

ì´í›„, ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ë¥¼ êµ¬í˜„í•˜ì—¬ ìš´ì˜ìê°€ Sentry ì´ìŠˆì™€ íŠ¸ë¦¬ì•„ì§€ ê²°ê³¼ë¥¼ ì‰½ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.

![](https://velog.velcdn.com/images/eunwoo1341/post/ccbb23f6-e515-4683-9ff4-116263ebb454/image.png)

ìœ„ ì‚¬ì§„ê³¼ ê°™ì´ Slackì—ì„œë„ ë§¤ë²ˆ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ íŠ¸ë¦¬ì•„ì§€ ê²°ê³¼ë¥¼ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
Sentry Webhook
    â†“
[1] ì„œëª… ê²€ì¦ (ë³´ì•ˆ)
    â†“
[2] DB ì—…ë°ì´íŠ¸
    - totalCount (ëˆ„ì )
    - windowCount (ìµœê·¼ 10ë¶„)
    â†“
[3] ë„ë°° ë°©ì§€ ì²´í¬
    - 10ë¶„ì— 1ë²ˆë§Œ ì•Œë¦¼
    â†“
[4] LLM íŠ¸ë¦¬ì•„ì§€ (ì¡°ê±´ë¶€)
    - ìƒˆ ì´ìŠˆ OR ê¸‰ì¦ OR error/fatal
    - 24ì‹œê°„ TTL ìºì‹œ
    â†“
[5] Slack ì•Œë¦¼ ì „ì†¡
```

# ìš´ì˜í•˜ë©´ì„œ ëŠë‚€ ì  / ë°°ìš´ ì 

ì´ ì‹œìŠ¤í…œì„ ìš´ì˜í•˜ë©´ì„œ ëª‡ ê°€ì§€ ì¤‘ìš”í•œ ì ì„ ê¹¨ë‹¬ì•˜ë‹¤.

## ìë™í™”ëŠ” ê¸°ëŠ¥ì´ ì•„ë‹ˆë¼ â€œíë¦„â€ì„ ë°”ê¾¸ëŠ” ì¼

ì²˜ìŒì—ëŠ” â€œSlackìœ¼ë¡œ ì•Œë¦¼ ë³´ë‚´ëŠ” ë´‡â€ì´ë©´ ëë‚  ì¤„ ì•Œì•˜ë‹¤.
í•˜ì§€ë§Œ ì§„ì§œ ì‹œê°„ì„ ì¡ì•„ë¨¹ëŠ” ê±´ ì•Œë¦¼ ìì²´ê°€ ì•„ë‹ˆë¼, ë°˜ë³µë˜ëŠ” ì´ˆë™ ëŒ€ì‘ì´ì—ˆë‹¤.

- ì¤‘ë³µ/í­ì£¼ ì œì–´(ìœˆë„ìš° ì§‘ê³„)
- ìƒíƒœ ê´€ë¦¬(ACK/FIXED)
- íˆìŠ¤í† ë¦¬(ëŒ€ì‹œë³´ë“œ)
- ì¡°ê±´ë¶€ LLM(ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒì„±)

ì´ê±¸ í•˜ë‚˜ì˜ íë¦„ìœ¼ë¡œ ë§Œë“¤ì—ˆì„ ë•Œ, ë¹„ë¡œì†Œ â€œì¼ì´ ì¤„ì–´ë“œëŠ”â€ ëŠë‚Œì´ ë‚¬ë‹¤.

## LLMì€ â€˜ì •ë‹µ ìƒì„±ê¸°â€™ê°€ ì•„ë‹ˆë¼ â€˜ì´ˆë™ ì‹œê°„ ë‹¨ì¶•ê¸°â€™

LLMì„ ë„ì…í•˜ë©´ì„œ ê¸°ëŒ€í–ˆë˜ ê±´ â€œì •í™•í•œ ì›ì¸ ë¶„ì„â€ì´ì—ˆë‹¤.
í•˜ì§€ë§Œ ì‹¤ì œë¡œ ë„ì›€ì´ ëœ ê±´, â€œì´ˆë™ ëŒ€ì‘ ì‹œê°„ì„ ì¤„ì—¬ì£¼ëŠ” ë„êµ¬â€ì˜€ë‹¤.
LLMì´ í•­ìƒ ì •í™•í•œ ë‹µì„ ì£¼ì§„ ì•Šì§€ë§Œ, â€œìš”ì•½ + ì›ì¸ í›„ë³´ + ë‹¤ìŒ ì•¡ì…˜â€ì„ ë¹ ë¥´ê²Œ ì œì‹œí•´ ì£¼ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ëŒ€ì‘ ì‹œê°„ì„ í¬ê²Œ ë‹¨ì¶•í•  ìˆ˜ ìˆì—ˆë‹¤.

## ë¹„ìš©/ì•ˆì •ì„±ì€ ê¸°ëŠ¥ë§Œí¼ ì¤‘ìš”í•˜ë‹¤

LLMì„ ëª¨ë“  ì´ìŠˆì— ë¶™ì´ë©´ ë¹„ìš©ì´ ë§ì´ ë“ ë‹¤. ì¤‘ìš”í•˜ì§€ ì•Šì€ ì´ìŠˆê¹Œì§€ ë¶„ì„í•´ì„œ ë…¸ì´ì¦ˆê°€ ë  ìˆ˜ë„ ìˆë‹¤.

- LLMì€ ì¡°ê±´ë¶€ + TTL ìºì‹œë¡œ ì œì–´
- Slack ë°œì†¡ ì‹¤íŒ¨ë„ ë¡œê·¸ë¡œ ë‚¨ê²¨ ìš´ì˜ ê°€ëŠ¥í•˜ê²Œ
- ì´ìŠˆ í­ì£¼ ìƒí™©ì—ì„œë„ ì•Œë¦¼ì´ â€œë„ë°°â€ë¡œ ë¬´ë ¥í™”ë˜ì§€ ì•Šê²Œ ì„¤ê³„

ì´ ì‹œìŠ¤í…œì„ í†µí•´ Sentry ì•Œë¦¼ì´ ë‹¨ìˆœí•œ â€˜ì¡ìŒâ€™ì´ ì•„ë‹ˆë¼, íŒ€ì´ ì‹ ì†í•˜ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” â€˜ì‹ í˜¸â€™ë¡œ ë°”ë€Œì—ˆë‹¤ê³  ìƒê°í•œë‹¤.
